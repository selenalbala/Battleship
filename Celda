package com.example.battleship;

import android.content.Context;

import androidx.annotation.NonNull;

public class Celda extends androidx.appcompat.widget.AppCompatImageButton{

    private int pos_x, pos_y;
    private boolean sePuedeColocar;

    public Celda(@NonNull Context context) {
        super(context);
        this.setImageResource(R.mipmap.ic_launcher);
        this.setScaleType(ScaleType.FIT_XY);
        this.setAdjustViewBounds(false);
        this.setPadding(0,0,0,0);
        sePuedeColocar=true;
    }

    public Celda putPosition(int x, int y){
        this.pos_x =x;
        this.pos_y =y;

        return this;
    }

    public boolean isSePuedeColocar() {
        return sePuedeColocar;
    }

    public void setSePuedeColocar(boolean sePuedeColocar) {
        this.sePuedeColocar = sePuedeColocar;
    }

    public int getPos_x() {
        return pos_x;
    }

    public void setPos_x(int pos_x) {
        this.pos_x = pos_x;
    }


    public int getPos_y() {
        return pos_y;
    }

    public void setPos_y(int pos_y) {
        this.pos_y = pos_y;
    }

    public boolean comprobarColocacion(Barco barco){
        boolean temp=true;
        if(sePuedeColocar){
            if (barco.getOrientacion()== Barco.Orientacion.vertical){
                if(barco.getPos_y()>=Datos.getTableroJugador()[0].length-1)
                    temp=false;
                if(barco.getPos_y()>=Datos.getTableroJugador()[0].length-2)
                    temp=false;
                if(barco.getPos_y()>=Datos.getTableroJugador()[0].length-3)
                    temp=false;
            }
            else{
                if(barco.getPos_x()>=Datos.getTableroJugador().length-1)
                    temp=false;
                if(barco.getPos_x()>=Datos.getTableroJugador().length-2)
                    temp=false;
                if(barco.getPos_x()>=Datos.getTableroJugador().length-3)
                    temp=false;
            }
        }
        else
            temp=false;

        return temp;
    }
        enum Tipo{
        Agua, Seleccionado, Tapado,
        Barco12_p1H, Barco12_p2H, Barco13_p1H, Barco13_p2H, Barco13_p3H, Barco14_p1H, Barco14_p2H, Barco14_p3H, Barco14_p4H,
        Barco12_p1V, Barco12_p2V, Barco13_p1V, Barco13_p2V, Barco13_p3V, Barco14_p1V, Barco14_p2V, Barco14_p3V, Barco14_p4V
    }

    public void cambiaTipo(Tipo tipoNuevo){ // introduces un tipo nuevo, si es igual no hace nada. Si es distinto, cambia la imagen.
        if(tipoActual == tipoNuevo) return;
        tipoActual=tipoNuevo;
        switch(tipoActual){
            case Barco12_p1H: this.setImageResource(R.mipmap.barco12_p1); break;
            case Barco12_p2H: this.setImageResource(R.mipmap.barco12_p2); break;
            case Barco13_p1H: this.setImageResource(R.mipmap.barco13_p1); break;
            case Barco13_p2H: this.setImageResource(R.mipmap.barco13_p2); break;
            case Barco13_p3H: this.setImageResource(R.mipmap.barco13_p3); break;
            case Barco14_p1H: this.setImageResource(R.mipmap.barco14_p1); break;
            case Barco14_p2H: this.setImageResource(R.mipmap.barco14_p2); break;
            case Barco14_p3H: this.setImageResource(R.mipmap.barco14_p3); break;
            case Barco14_p4H: this.setImageResource(R.mipmap.barco14_p4); break;
            case Barco12_p1V: this.setImageResource(R.mipmap.barco12_p1); break;
            case Barco12_p2V: this.setImageResource(R.mipmap.barco12_p2); break;
            case Barco13_p1V: this.setImageResource(R.mipmap.barco13_p1); break;
            case Barco13_p2V: this.setImageResource(R.mipmap.barco13_p2); break;
            case Barco13_p3V: this.setImageResource(R.mipmap.barco13_p3); break;
            case Barco14_p1V: this.setImageResource(R.mipmap.barco14_p1); break;
            case Barco14_p2V: this.setImageResource(R.mipmap.barco14_p2); break;
            case Barco14_p3V: this.setImageResource(R.mipmap.barco14_p3); break;
            case Barco14_p4V: this.setImageResource(R.mipmap.barco14_p4); break;
            default: Log.e("Clase Celda","Hay un error en la funci√≥n cambiaTipo");

}

